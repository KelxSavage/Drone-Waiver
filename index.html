<!DOCTYPE html>
<html>
<head>
<title>Drone Racing Waiver</title>

<style>
body { font-family: Arial; max-width:600px; margin:auto; }
input, textarea { width:100%; padding:10px; margin:10px 0; }
button { background:black; color:white; padding:15px; width:100%; }
</style>

<!-- jsPDF for real PDF generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>

<body>
<h2>Drone Racing Waiver</h2>

<form action="https://formsubmit.co/kelechi.nwuke@gmail.com" method="POST" onsubmit="return validateForm()">

<input type="text" name="Participant Name" placeholder="Participant Name" required>

<input type="number" id="age" name="Age" placeholder="Age" required>

<input type="text" id="guardian" name="Guardian Name" placeholder="Parent/Guardian (only if under 18)">

<input type="email" name="email" placeholder="Email" required>

<input type="text" name="Phone" placeholder="Phone Number" required>

<textarea id="waiverText" readonly>
DRONE RACING LIABILITY WAIVER & RELEASE

I understand that participation in drone racing involves small flying aircraft and carries risks including, but not limited to, minor injury, property damage, or equipment malfunction.

I voluntarily choose to participate (or allow my child to participate) in drone racing activities operated by Velocity Labs by Kel Savage.

I agree to follow all safety instructions and acknowledge that failure to do so may result in removal from the activity.

I release and hold harmless Velocity Labs, its operators, staff, volunteers, and event hosts from all liability, claims, or demands arising from participation, except in cases of gross negligence.

If I am signing on behalf of a minor, I certify that I am the parent or legal guardian and that I have the legal authority to sign this agreement.

By signing below, I acknowledge that I have read and agree to this waiver.
</textarea>

<label>Type your full name as signature</label>
<input type="text" id="signature" name="Signature" required>

<input type="hidden" name="_template" value="table">

<!-- tells FormSubmit to email the signer -->
<input type="hidden" name="_replyto" value="">

<!-- Auto-response email -->
<input type="hidden" name="_autoresponse" value="Thank you for signing the Velocity Labs Drone Racing Waiver. Please keep this email for your records. Fly safe!">

<button type="submit">I Agree & Race</button>

</form>

<br>
<button onclick="downloadPDF()">Download My Waiver PDF</button>

<script>
function validateForm() {
  var age = document.getElementById("age").value;
  var guardian = document.getElementById("guardian").value;

  if (age < 18 && guardian.trim() === "") {
    alert("Parent or Guardian name is required for participants under 18.");
    return false;
  }
  return true;
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  var doc = new jsPDF();

  var name = document.querySelector('input[name="Participant Name"]').value;
  var age = document.getElementById("age").value;
  var guardian = document.getElementById("guardian").value;
  var email = document.querySelector('input[name="email"]').value;
  var phone = document.querySelector('input[name="Phone"]').value;
  var sig = document.getElementById("signature").value;
  var waiver = document.getElementById("waiverText").value;

  doc.text("Velocity Labs Drone Racing Waiver", 10, 10);
  doc.text("Participant: " + name, 10, 20);
  doc.text("Age: " + age, 10, 30);
  if (guardian) doc.text("Guardian: " + guardian, 10, 40);
  doc.text("Email: " + email, 10, 50);
  doc.text("Phone: " + phone, 10, 60);
  doc.text("Signature: " + sig, 10, 70);

  doc.text(waiver, 10, 90, { maxWidth: 180 });

  doc.save("Drone_Racing_Waiver.pdf");
}
</script>

</body>
</html>
